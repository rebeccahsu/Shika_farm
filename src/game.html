<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    @@include('./layout/head.html', {
    "title" : "Sìkha 牧場"
    })
    <style>
        html{
            cursor: none;
        }
        body{
            margin: 0;
            padding: 0;
        }
        img{
            user-select: none;
            pointer-events: none;
        }
        h4{
            text-align: center;
            padding-top: 50px;
        }
        p{
            padding-top: 20px;
            margin-bottom: 50px;
            text-align: center;
        }
        .game-bg{
            background-image: url("img/game/game-bg.png");
            background-size: cover;
            background-repeat: no-repeat;
            width: 100%;
            height: 100vh;
            /* position: relative; */
        }

        .sheep{
            position: relative;
            display: block;
            overflow: hidden;
            width: 400px;
            margin: 0 auto;
            padding-right: 46px;
        }

        .fur{
            position: absolute;
            z-index: 40;
        }


        .sheep-img, .sheep-done{
            padding-right: 0px;
            width: 100%;
            /* display: none; */
        }

        .sheep-done{
            display: block;
            display: none;
            width: 115%;
            padding-left: 20px;
            padding-top: 10px;
        }

        .shaver{
            position: fixed;
            /* border: 1px solid blue; */
            width: 150px;
            z-index: 50;
        }

        @media (max-width: 576px){
            p{
            margin-bottom: 10px;
            font-size: 15px;
            }
            .game-bg{
                position: fixed;
            }
            .sheep{
                transform: scale(.8) translateX(-3%) translateY(6%);
            }
            .shaver{
                position: fixed;
                /* border: 1px solid blue; */
                width: 100px;
                z-index: 50;
            }
        }

        .fall{
            animation: fall 1.5s ease;
        }

        @keyframes fall {
            0%{
                transform: translateY(0), rotate(10deg);
                opacity: 1;
            }
            50%{
                transform: translateY(100%), rotate(-10deg);
            }
            75%{
                opacity: .8;
            }
            100%{
                transform: translateY(200%);
                opacity: 0;
            }            
        }

    </style>
</head>

<body>
    <img src="img/game/shaver.png" alt="" class="shaver" id="shaver">
    <div class="game-bg">
        <h4>剃羊毛達人</h4>
        <p>移動滑鼠來幫綿羊剃毛吧！</p>
        <div class="sheep">
            <img src="img/game/no_fur.png" alt="" class="sheep-img">
            <img src="img/game/sheep_after.png" alt="" class="sheep-done">
            <div class="fur" style="top: -5px; left: 39px;">
                <img src="img/game/headfur.png" alt="" >
            </div>
            <div class="fur" style="top: 98px; left: 76px;">
                <img src="img/game/fur8.png" alt="" >
            </div>
            <div class="fur" style="top: 81px; left: 124px;">
                <img src="img/game/fur7.png" alt="" >
            </div>
            <!-- ----- -->
            <div class="fur" style="top: 140px; left: 88px;">
                <img src="img/game/fur8.png" alt="" >
            </div>
            <div class="fur" style="top: 141px; left: 131px;">
                <img src="img/game/fur7.png" alt="" >
            </div>
            <div class="fur" style="top: 89px; left: 180px;">
                <img src="img/game/fur8.png" alt="" >
            </div>
            <!-- ----- -->
            <div class="fur" style="top: 185px; left: 88px;">
                <img src="img/game/fur8.png" alt="" >
            </div>
            <div class="fur" style="top: 200px; left: 162px;">
                <img src="img/game/fur7.png" alt="" >
            </div>
            <div class="fur" style="top: 153px; left: 187px;">
                <img src="img/game/fur8.png" alt="" >
            </div>
            <div class="fur" style="top: 97px; left: 234px;">
                <img src="img/game/fur7.png" alt="" >
            </div>
            <div class="fur" style="top: 108px; left: 289px;">
                <img src="img/game/fur8.png" alt="" >
            </div>
            <!-- ----- -->
            <div class="fur" style="top: 206px; left: 120px;">
                <img src="img/game/fur8.png" alt="" >
            </div>
            <div class="fur" style="top: 198px; left: 237px;">
                <img src="img/game/fur7.png" alt="" >
            </div>
            <div class="fur" style="top: 162px; left: 228px;">
                <img src="img/game/fur8.png" alt="" >
            </div>
            <div class="fur" style="top: 166px; left: 276px;">
                <img src="img/game/fur7.png" alt="" >
            </div>
            <div class="fur" style="top: 139px; left: 326px;">
                <img src="img/game/fur8.png" alt="" >
            </div>
        </div>
    </div>

    <script>
        let shaver = document.getElementById("shaver");
        let fur = document.querySelectorAll(".fur");
        let click_type = "click";

        function shaveFur (type){
            fur.forEach(function(el){
                el.addEventListener(type, function(){
                    el.classList.add("fall");
                    setTimeout(function(){
                        el.remove();
                    }, 1500)
                });
            });
        };

        function showSheepAfter (){
            if(document.querySelector('.fur') == undefined){
                    $('.sheep-img').fadeOut(800);
                    setTimeout(function(){
                        $('.sheep-done').fadeIn(1000);
                    }, 800)
                }
        };

        if(window.innerWidth >= 768){
            click_type = "mousemove";
            document.addEventListener(click_type, function(e){
                shaver.style.left = e.pageX - 60 + "px";
                shaver.style.top = e.pageY - window.scrollY - 60 + "px";
                showSheepAfter();
            });

            shaveFur(click_type);

            gsap.to('.shaver', {
                duration: 1,
                repeat: -1,
                // repeatRefresh: true,
                keyframes: [
                    { duration: 1, rotation: 10},
                    { duration: 1, rotation: 0},
                ]
            });
        
        }else{
            shaver.remove();
            document.querySelector("p").innerHTML = "用手指點擊來幫綿羊剃毛吧！";
            click_type = "click";
            document.addEventListener("touchstart", function(e){
                showSheepAfter();
            });
            
            shaveFur(click_type);
        }

    </script>
</body>

</html>